#!/usr/bin/env python
# coding=utf-8


from libs import quit_test
from project1 import get_blacklist_call_results_by_mobile
from project1 import Logger
import argparse
import os
import time


if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='Process some integers.')
    parser.add_argument('log_path', nargs='?', default='.', help='Log path.')

    args = parser.parse_args()

    try:
        log_path = args.log_path
        # Log.
        if not os.path.exists(log_path):
            os.makedirs(log_path)
        log_fn = os.path.join(log_path, '%s.log' % os.path.basename(__file__))
        log = Logger(log_fn)

        # Valid mobile number.
        mobile = '15711362928'

        comments = ''
        r = get_blacklist_call_results_by_mobile(mobile)
        if r is None:
            test_res = 'FAIL'
            comments = 'Fail to run test case.'
            quit_test(log, test_res, comments)

        rc = r.status_code
        log.d('Staus Code: %d' % rc)
        if rc == 200:
            test_res = 'PASS'
        else:
            test_res = 'FAIL'
            comments = 'Status Code is %d' % rc
        quit_test(log, test_res, comments)
    except Exception, e:
        log.e(e)
        raise(e)
